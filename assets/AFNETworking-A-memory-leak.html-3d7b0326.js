const e=JSON.parse('{"key":"v-432769ed","path":"/posts/iOS/source/AFNETworking-A-memory-leak.html","title":"AFNetworking A memory leak","lang":"zh-CN","frontmatter":{"title":"AFNetworking A memory leak","date":"2017-01-19T00:00:00.000Z","category":["iOS"],"tag":["iOS","Bug录"],"description":"细心的你是否也发现了 AFN 的内存泄漏的问题了呢. 解决方法 + (AFHTTPSessionManager *)sharedHTTPSession{ static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ manager = [AFHTTPSessionManager manager]; manager.requestSerializer.timeoutInterval = 30; [manager.requestSerializer setValue:@\\"XMLHttpRequest\\" forHTTPHeaderField:@\\"X-Requested-With\\"]; }); return manager; } + (AFURLSessionManager *)sharedURLSession{ static dispatch_once_t onceToken2; dispatch_once(&amp;onceToken2, ^{ urlsession = [[AFURLSessionManager alloc] initWithSessionConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration]]; }); return urlsession; }","head":[["meta",{"property":"og:url","content":"https://oragekk.me/blogs/posts/iOS/source/AFNETworking-A-memory-leak.html"}],["meta",{"property":"og:site_name","content":"茜茜的博客"}],["meta",{"property":"og:title","content":"AFNetworking A memory leak"}],["meta",{"property":"og:description","content":"细心的你是否也发现了 AFN 的内存泄漏的问题了呢. 解决方法 + (AFHTTPSessionManager *)sharedHTTPSession{ static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ manager = [AFHTTPSessionManager manager]; manager.requestSerializer.timeoutInterval = 30; [manager.requestSerializer setValue:@\\"XMLHttpRequest\\" forHTTPHeaderField:@\\"X-Requested-With\\"]; }); return manager; } + (AFURLSessionManager *)sharedURLSession{ static dispatch_once_t onceToken2; dispatch_once(&amp;onceToken2, ^{ urlsession = [[AFURLSessionManager alloc] initWithSessionConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration]]; }); return urlsession; }"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-07-24T08:54:35.000Z"}],["meta",{"property":"article:author","content":"茜茜"}],["meta",{"property":"article:tag","content":"iOS"}],["meta",{"property":"article:tag","content":"Bug录"}],["meta",{"property":"article:published_time","content":"2017-01-19T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-07-24T08:54:35.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"AFNetworking A memory leak\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2017-01-19T00:00:00.000Z\\",\\"dateModified\\":\\"2023-07-24T08:54:35.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"茜茜\\",\\"url\\":\\"https://orgaekk.me\\"}]}"]]},"headers":[{"level":3,"title":"解决方法","slug":"解决方法","link":"#解决方法","children":[]}],"git":{"createdTime":1690188875000,"updatedTime":1690188875000,"contributors":[{"name":"Zzhgitup","email":"99540215+Zzhgitup@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":0.39,"words":117},"filePathRelative":"posts/iOS/source/AFNETworking-A-memory-leak.md","localizedDate":"2017年1月19日","excerpt":"<blockquote>\\n<p>细心的你是否也发现了 AFN 的内存泄漏的问题了呢.</p>\\n</blockquote>\\n<h3> 解决方法</h3>\\n<div class=\\"language-objc line-numbers-mode\\" data-ext=\\"objc\\"><pre class=\\"shiki one-dark-pro\\" style=\\"background-color: #282c34\\" tabindex=\\"0\\"><code><span class=\\"line\\"><span style=\\"color: #ABB2BF\\">    + (AFHTTPSessionManager *)sharedHTTPSession{</span></span>\\n<span class=\\"line\\"><span style=\\"color: #ABB2BF\\">    </span><span style=\\"color: #C678DD\\">static</span><span style=\\"color: #ABB2BF\\"> dispatch_once_t onceToken;</span></span>\\n<span class=\\"line\\"><span style=\\"color: #ABB2BF\\">    </span><span style=\\"color: #61AFEF\\">dispatch_once</span><span style=\\"color: #ABB2BF\\">(&amp;onceToken, ^{</span></span>\\n<span class=\\"line\\"><span style=\\"color: #ABB2BF\\">        manager </span><span style=\\"color: #56B6C2\\">=</span><span style=\\"color: #ABB2BF\\"> [AFHTTPSessionManager </span><span style=\\"color: #61AFEF\\">manager</span><span style=\\"color: #ABB2BF\\">];</span></span>\\n<span class=\\"line\\"><span style=\\"color: #ABB2BF\\">        </span><span style=\\"color: #E5C07B\\">manager</span><span style=\\"color: #ABB2BF\\">.</span><span style=\\"color: #E5C07B\\">requestSerializer</span><span style=\\"color: #ABB2BF\\">.</span><span style=\\"color: #E06C75\\">timeoutInterval</span><span style=\\"color: #ABB2BF\\"> </span><span style=\\"color: #56B6C2\\">=</span><span style=\\"color: #ABB2BF\\"> </span><span style=\\"color: #D19A66\\">30</span><span style=\\"color: #ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"color: #ABB2BF\\">        [manager.requestSerializer  setValue:</span><span style=\\"color: #98C379\\">@\\"XMLHttpRequest\\"</span><span style=\\"color: #ABB2BF\\"> </span><span style=\\"color: #61AFEF\\">forHTTPHeaderField:</span><span style=\\"color: #98C379\\">@\\"X-Requested-With\\"</span><span style=\\"color: #ABB2BF\\">];</span></span>\\n<span class=\\"line\\"><span style=\\"color: #ABB2BF\\">    });</span></span>\\n<span class=\\"line\\"><span style=\\"color: #ABB2BF\\">    </span><span style=\\"color: #C678DD\\">return</span><span style=\\"color: #ABB2BF\\"> manager;</span></span>\\n<span class=\\"line\\"><span style=\\"color: #ABB2BF\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"color: #ABB2BF\\">    + (AFURLSessionManager *)sharedURLSession{</span></span>\\n<span class=\\"line\\"><span style=\\"color: #ABB2BF\\">    </span><span style=\\"color: #C678DD\\">static</span><span style=\\"color: #ABB2BF\\"> dispatch_once_t onceToken2;</span></span>\\n<span class=\\"line\\"><span style=\\"color: #ABB2BF\\">    </span><span style=\\"color: #61AFEF\\">dispatch_once</span><span style=\\"color: #ABB2BF\\">(&amp;onceToken2, ^{</span></span>\\n<span class=\\"line\\"><span style=\\"color: #ABB2BF\\">        urlsession </span><span style=\\"color: #56B6C2\\">=</span><span style=\\"color: #ABB2BF\\"> [[AFURLSessionManager </span><span style=\\"color: #61AFEF\\">alloc</span><span style=\\"color: #ABB2BF\\">] </span><span style=\\"color: #61AFEF\\">initWithSessionConfiguration:</span><span style=\\"color: #ABB2BF\\">[NSURLSessionConfiguration </span><span style=\\"color: #61AFEF\\">defaultSessionConfiguration</span><span style=\\"color: #ABB2BF\\">]];</span></span>\\n<span class=\\"line\\"><span style=\\"color: #ABB2BF\\">    });</span></span>\\n<span class=\\"line\\"><span style=\\"color: #ABB2BF\\">    </span><span style=\\"color: #C678DD\\">return</span><span style=\\"color: #ABB2BF\\"> urlsession;</span></span>\\n<span class=\\"line\\"><span style=\\"color: #ABB2BF\\">    }</span></span>\\n<span class=\\"line\\"></span></code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","copyright":{"author":"Oragekk","license":"CC BY-NC-SA 4.0"},"autoDesc":true}');export{e as data};
